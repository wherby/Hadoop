"use strict";define("bundles/programming/views/submission",["require","exports","module","underscore","bundles/ondemand/components/assignments/AssignmentHonorCode","bundles/ondemand/utils/assignmentVerificationTest","bundles/page/lib/metatagsAddressBook","bundles/phoenix/lib/view","bundles/programming/views/gridSubmissions","bundles/programming/views/immediateSubmissions","bundles/programming/views/submission.html","css!bundles/phoenix/styl/containers.css"],function(require,exports,module){var _=require("underscore"),e=require("bundles/ondemand/components/assignments/AssignmentHonorCode"),t=require("bundles/ondemand/utils/assignmentVerificationTest"),n=t.inHonorCodeVariant,o=require("bundles/page/lib/metatagsAddressBook"),a=require("bundles/phoenix/lib/view"),i=require("bundles/programming/views/gridSubmissions"),s=require("bundles/programming/views/immediateSubmissions"),d=require("bundles/programming/views/submission.html");require("css!bundles/phoenix/styl/containers.css");var r=a.extend({name:"body",template:d,initialize:function initialize(i){_(this).extend(_(i).pick("itemMetadata","immediateAssignmentParts","immediateSubmissionHistory","learnerAssignment","verificationDisplay","showDebugTools")),this.showHonorCode=this.itemMetadata.isGradable()&&n()&&!e.hasAcceptedHonorCode(this.itemMetadata.get("id"))},postRender:function postRender(){o.setMetatags({pageName:"title-and-description",context:{title:this.itemMetadata.getName(),description:this.itemMetadata.get("lesson.module.description")}})},templateOptions:function templateOptions(){return{itemMetadata:this.itemMetadata,showHonorCode:this.showHonorCode}},onHonorCodeAccept:function onHonorCodeAccept(){this.showHonorCode=!1,this.render()},renderSubviews:function renderSubviews(){if(this.showHonorCode)this.renderReactInto(e,"AssignmentHonorCode",{onHonorCodeAccept:this.onHonorCodeAccept.bind(this),itemId:this.itemMetadata.getId()});else{var t=this.itemMetadata.getTypeName();switch(t){case"programming":this.region.append(s,{to:this.$$("submissions"),initialize:{assignmentParts:this.immediateAssignmentParts,itemMetadata:this.itemMetadata,submissionHistory:this.immediateSubmissionHistory,verificationDisplay:this.verificationDisplay},module:s});break;case"gradedProgramming":case"ungradedProgramming":this.region.append(i,{to:this.$$("submissions"),initialize:_(this).pick("itemMetadata","learnerAssignment","verificationDisplay","showDebugTools"),module:i});break;default:throw new Error("Unknown programming item type: "+t)}}}});module.exports=r});